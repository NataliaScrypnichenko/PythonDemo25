## üîπ **Magic (Dunder) –º–µ—Ç–æ–¥–∏ –≤ Python**
# **Magic-–º–µ—Ç–æ–¥–∏** (–∞–±–æ **dunder-–º–µ—Ç–æ–¥–∏**, –≤—ñ–¥ *double underscore*) ‚Äì —Ü–µ
# —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏ –≤ Python, —è–∫—ñ –º–∞—é—Ç—å —Ñ–æ—Ä–º–∞—Ç `__method__` —ñ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ–≤–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö.
# üìå **–ü—Ä–∏–∫–ª–∞–¥ magic-–º–µ—Ç–æ–¥—É**:
class Example:
    def __init__(self, value):
        self.value = value

    def __str__(self):
        return f"–û–±'—î–∫—Ç –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º {self.value}"

obj = Example(10)
print(obj)  # –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è __str__: –û–±'—î–∫—Ç –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º 10
## üîπ **–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ —Å–ø–∏—Å–æ–∫ magic-–º–µ—Ç–æ–¥—ñ–≤**

### **1Ô∏è‚É£ –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ —Ç–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏**
# –ú–µ—Ç–æ–¥–∏, —è–∫—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å –∞–±–æ –∑–Ω–∏—â—É—é—Ç—å –æ–±'—î–∫—Ç–∏.
#
# | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
# |--------|----------------------------|
# | `__init__(self, ...)` | –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –æ–±'—î–∫—Ç–∞ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä) |
# | `__new__(cls, ...)` | –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ `__init__`, —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä |
# | `__del__(self)` | –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –æ–±'—î–∫—Ç–∞ |
#
# **üìå –ü—Ä–∏–∫–ª–∞–¥:**
class Person:
    def __init__(self, name):
        self.name = name
        print(f"–°—Ç–≤–æ—Ä–µ–Ω–æ –æ–±'—î–∫—Ç –¥–ª—è {self.name}")

    def __del__(self):
        print(f"–û–±'—î–∫—Ç {self.name} –≤–∏–¥–∞–ª–µ–Ω–æ")

p = Person("–ê–Ω–Ω–∞")
del p  # –í–∏–∫–ª–∏—á–µ __del__
# ### **2Ô∏è‚É£ –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Ç–∏–ø—ñ–≤**
# –ú–µ—Ç–æ–¥–∏, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –≤ —ñ–Ω—à—ñ —Ç–∏–ø–∏.
#
# | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
# |--------|----------------------------|
# | `__str__(self)` | –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç —É —Ä—è–¥–æ–∫ (–¥–ª—è `print()`) |
# | `__repr__(self)` | –û—Ñ—ñ—Ü—ñ–π–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ (`repr(obj)`) |
# | `__len__(self)` | –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `len(obj)` |
# | `__int__(self)` | –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ `int(obj)` |
# | `__float__(self)` | –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ `float(obj)` |
# | `__bool__(self)` | –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ `bool(obj)` |
# **üìå –ü—Ä–∏–∫–ª–∞–¥:**
class Item:
    def __init__(self, name, quantity):
        self.name = name
        self.quantity = quantity

    def __len__(self):
        return self.quantity

    def __str__(self):
        return f"–¢–æ–≤–∞—Ä {self.name}, –∫—ñ–ª—å–∫—ñ—Å—Ç—å: {self.quantity}"

item = Item("–Ø–±–ª—É–∫–∞", 10)
print(str(item))  # –¢–æ–≤–∞—Ä –Ø–±–ª—É–∫–∞, –∫—ñ–ª—å–∫—ñ—Å—Ç—å: 10
print(len(item))  # 10

### **3Ô∏è‚É£ –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó**
# –î–æ–∑–≤–æ–ª—è—é—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤.
#
# | –ú–µ—Ç–æ–¥                       –û–ø–µ—Ä–∞—Ç–æ—Ä |
# |--------|---------|
# | `__add__(self, other)` | `+` (–¥–æ–¥–∞–≤–∞–Ω–Ω—è) |
# | `__sub__(self, other)` | `-` (–≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è) |
# | `__mul__(self, other)` | `*` (–º–Ω–æ–∂–µ–Ω–Ω—è) |
# | `__truediv__(self, other)` | `/` (–¥—ñ–ª–µ–Ω–Ω—è) |
# | `__floordiv__(self, other)` | `//` (—Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–µ –¥—ñ–ª–µ–Ω–Ω—è) |
# | `__mod__(self, other)` | `%` (–∑–∞–ª–∏—à–æ–∫) |
# | `__pow__(self, other)` | `**` (–ø—ñ–¥–Ω–µ—Å–µ–Ω–Ω—è –¥–æ —Å—Ç–µ–ø–µ–Ω—è) |

# **üìå –ü—Ä–∏–∫–ª–∞–¥:**
class Number:
    def __init__(self, value):
        self.value = value

    def __add__(self, other):
        return Number(self.value + other.value)

    def __str__(self):
        return str(self.value)

n1 = Number(5)
n2 = Number(10)
print(n1 + n2)  # 15 (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è __add__)

### **4Ô∏è‚É£ –û–ø–µ—Ä–∞—Ü—ñ—ó –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è**
# –ú–æ–¥–∏—Ñ—ñ–∫—É—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ `==`, `<`, `>`, —Ç–æ—â–æ.
# | –ú–µ—Ç–æ–¥ | –û–ø–µ—Ä–∞—Ç–æ—Ä |
# |--------|---------|
# | `__eq__(self, other)` | `==` (–¥–æ—Ä—ñ–≤–Ω—é—î) |
# | `__ne__(self, other)` | `!=` (–Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î) |
# | `__lt__(self, other)` | `<` (–º–µ–Ω—à–µ) |
# | `__le__(self, other)` | `<=` (–º–µ–Ω—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î) |
# | `__gt__(self, other)` | `>` (–±—ñ–ª—å—à–µ) |
# | `__ge__(self, other)` | `>=` (–±—ñ–ª—å—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î) |
#
# **üìå –ü—Ä–∏–∫–ª–∞–¥:**
class Box:
    def __init__(self, weight):
        self.weight = weight

    def __lt__(self, other):
        return self.weight < other.weight

b1 = Box(10)
b2 = Box(20)
print(b1 < b2)  # True (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è __lt__)
### **5Ô∏è‚É£ –†–æ–±–æ—Ç–∞ –∑ —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—î—é —Ç–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ—î—é**
# –ú–µ—Ç–æ–¥–∏, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –æ–±'—î–∫—Ç–∞–º –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ —Å–ø–∏—Å–∫–∏.
# | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
# | `__getitem__(self, index)` = `obj[index]` |
# | `__setitem__(self, index, value)` = `obj[index] = value` |
# | `__delitem__(self, index)` | `del obj[index]` |
# | `__iter__(self)` | –ü–æ–≤–µ—Ä—Ç–∞—î —ñ—Ç–µ—Ä–∞—Ç–æ—Ä (`for item in obj`) |
# | `__next__(self)` | –ü–æ–≤–µ—Ä—Ç–∞—î –Ω–∞—Å—Ç—É–ø–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä—ñ |
#
# **üìå –ü—Ä–∏–∫–ª–∞–¥ `__getitem__` —Ç–∞ `__setitem__`:**
class CustomList:
    def __init__(self, data):
        self.data = data

    def __getitem__(self, index):
        return self.data[index]

    def __setitem__(self, index, value):
        self.data[index] = value

my_list = CustomList([10, 20, 30])
print(my_list[1])  # 20 (__getitem__)
my_list[1] = 99  # (__setitem__)
print(my_list.data)  # [10, 99, 30]

### **6Ô∏è‚É£ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ñ –º–µ–Ω–µ–¥–∂–µ—Ä–∏ (`with ... as`)**
# –ú–µ—Ç–æ–¥–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è/–∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤.
# | –ú–µ—Ç–æ–¥                         | –û–ø–∏—Å |
# | `__enter__(self)` = –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤—Ö–æ–¥—ñ –≤ `with` |
# | `__exit__(self, exc_type, exc_value, traceback)` = –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ `with` |
class FileManager:
    def __init__(self, filename):
        self.filename = filename

    def __enter__(self):
        self.file = open(self.filename, 'w')
        return self.file

    def __exit__(self, exc_type, exc_value, traceback):
        self.file.close()

with FileManager("test.txt") as f:
    f.write("Hello, world!")

## üîπ **–í–∏—Å–Ω–æ–≤–æ–∫**
# ‚úÖ Magic-–º–µ—Ç–æ–¥–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –æ–±'—î–∫—Ç—ñ–≤ Python.
# ‚úÖ –í–æ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è **–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π, –ø–æ—Ä—ñ–≤–Ω—è–Ω—å, —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó, —ñ—Ç–µ—Ä–∞—Ü—ñ–π,
# –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤ —Ç–æ—â–æ**.
# ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è magic-–º–µ—Ç–æ–¥—ñ–≤ –¥–æ–ø–æ–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ **–≥–Ω—É—á–∫—ñ —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª—ñ –∫–ª–∞—Å–∏**. üöÄ